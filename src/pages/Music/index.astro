---
const SITE_NAME = "The-Circle";

/* Videos (Mall Days centered) */
const videoTracks = [
  { title: "Video", youtubeId: "9CdIK8tILPo" },
  { title: "Mall Days", youtubeId: "GZ-o7LNu1Vg", featured: true },
  { title: "Video", youtubeId: "HFPc52w-VqI" },
];

/* SoundCloud embed builder */
const scEmbedSrc = (trackUrl) => {
  const p = new URLSearchParams({
    url: trackUrl,
    color: "#09ff03",
    auto_play: "false",
    hide_related: "true",
    show_comments: "false",
    show_user: "false",
    show_reposts: "false",
    show_teaser: "false",
    visual: "false",
  });
  return `https://w.soundcloud.com/player/?${p.toString()}`;
};

/*
  Catalog structure:
  Genre → Artist → Album → Tracks
*/
const catalog = [
  {
    genre: "Country",
    artists: [
      {
        name: "TGS",
        albums: [
          {
            title: "Whiskey & Rust",
            url: "https://soundcloud.com/thegamestoner/sets/whiskey-rust",
            tracks: [
              { title: "Barstool Sessions", url: "https://soundcloud.com/thegamestoner/barstool-sessions-1" },
              { title: "Bowtie Blues", url: "https://soundcloud.com/thegamestoner/bowtie-blues-2" },
              { title: "High on Summer", url: "https://soundcloud.com/thegamestoner/high-on-summer-3" },
              { title: "Whiskey & Ashes", url: "https://soundcloud.com/thegamestoner/whiskey-ashes-4" },
              { title: "A Good Man After All", url: "https://soundcloud.com/thegamestoner/a-good-man-after-all-5" },
            ],
          },
        ],
      },
    ],
  },
  {
    genre: "Hip-Hop / Rap",
    artists: [
      {
        name: "TGS",
        albums: [
          {
            title: "Smoke & Mirrors",
            url: "https://soundcloud.com/thegamestoner/sets/smoke-mirrors",
            tracks: [
              { title: "Buffalo Born", url: "https://soundcloud.com/thegamestoner/the-7-1-6-1" },
              { title: "Cruisin’ down Elmwood", url: "https://soundcloud.com/thegamestoner/cruisin-down-elmwood-2" },
              { title: "Day Off", url: "https://soundcloud.com/thegamestoner/day-off-3" },
              { title: "My Routine", url: "https://soundcloud.com/thegamestoner/routine-4" },
              { title: "Mall Days", url: "https://soundcloud.com/thegamestoner/mall-rats-5" },
              { title: "BRB", url: "https://soundcloud.com/thegamestoner/brb-6" },
              { title: "Get Real", url: "https://soundcloud.com/thegamestoner/get-real-7" },
            ],
          },
        ],
      },
    ],
  },
];
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Music • {SITE_NAME}</title>
    <link rel="icon" href="/favicon.png" type="image/svg+xml" />
    <meta name="description" content="The-Circle Music — videos and catalog by genre and artist." />
  </head>

  <body>
    <div class="page">
      <header class="top">
        <div class="container nav">
          <a class="brand" href="/">
            <img src="/favicon.png" alt="" class="logo"/>
            <span>{SITE_NAME}</span>
          </a>

          <nav class="links">
            <a href="/discord">Discord</a>
            <a href="/league">League</a>
            <a href="/music">Music</a>
            <a href="/about">About</a>
            <a href="/blog">Blog</a>
          </nav>
        </div>
      </header>

      <main class="container">
        <section class="hero">
          <div class="heroCard">
            <div class="heroTop">
              <span class="kicker">The-Circle Music</span>
              <span class="mini">Catalog</span>
            </div>

            <h1>Music</h1>

            <p class="lead">
              Videos up top. Audio below — expand a genre, then an artist, then an album.
            </p>
          </div>
        </section>

        <!-- VIDEOS -->
        <section class="card" aria-label="Music videos">
          <div class="cardTop">
            <h2>Videos</h2>
            <span class="tag soft">{videoTracks.length} video(s)</span>
          </div>

          <div class="grid videosGrid">
            {videoTracks.map((v) => (
              <article class={`tile videoTile ${v.featured ? "featuredVideo" : ""}`}>
                <div class="tileTop">
                  <h3>{v.title}</h3>
                  <span class="chip">Video</span>
                </div>

                <div class="player">
                  <iframe
                    src={`https://www.youtube-nocookie.com/embed/${v.youtubeId}`}
                    title={v.title}
                    loading="lazy"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen
                  ></iframe>
                </div>
              </article>
            ))}
          </div>
        </section>

        <!-- AUDIO (Genre → Artist → Album) -->
        <section class="card" aria-label="Audio catalog">
          <div class="cardTop">
            <h2>Audio</h2>
            <span class="tag soft">Tap to expand</span>
          </div>

          <div class="accordions">
            {catalog.map((g) => (
              <details class="acc">
                <summary class="accSum">
                  <div class="sumLeft">
                    <span class="sumTitle">{g.genre}</span>
                    <span class="chip soft">{g.artists.length} artist(s)</span>
                  </div>
                  <span class="chev" aria-hidden="true">▾</span>
                </summary>

                <div class="accBody">
                  {g.artists.map((ar) => (
                    <details class="acc nestedAcc">
                      <summary class="accSum">
                        <div class="sumLeft">
                          <span class="sumTitle">{ar.name}</span>
                          <span class="chip soft">{ar.albums.length} album(s)</span>
                        </div>
                        <span class="chev" aria-hidden="true">▾</span>
                      </summary>

                      <div class="accBody">
                        {ar.albums.map((a) => (
                          <details class="acc albumAcc">
                            <summary class="accSum">
                              <div class="sumLeft">
                                <span class="sumTitle">{a.title}</span>
                                <span class="chip soft">{a.tracks.length} track(s)</span>
                              </div>
                              <div class="sumRight">
                                <a class="btn ghost" href={a.url} target="_blank" rel="noreferrer" onclick="event.stopPropagation()">
                                  Open
                                </a>
                                <span class="chev" aria-hidden="true">▾</span>
                              </div>
                            </summary>

                            <div class="accBody tracksBody">
                              <div class="trackGrid">
                                {a.tracks.map((t) => (
                                  <div class="trackItem">
                                    <div class="trackMeta">
                                      <span class="trackName">{t.title}</span>
                                      <a class="trackLink" href={t.url} target="_blank" rel="noreferrer">Link</a>
                                    </div>

                                    <iframe
                                      class="scFrame"
                                      title={`${ar.name} — ${a.title} — ${t.title}`}
                                      scrolling="no"
                                      frameborder="no"
                                      allow="autoplay"
                                      loading="lazy"
                                      src={scEmbedSrc(t.url)}
                                    ></iframe>
                                  </div>
                                ))}
                              </div>
                            </div>
                          </details>
                        ))}
                      </div>
                    </details>
                  ))}
                </div>
              </details>
            ))}
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="container foot">
          <span>© {new Date().getFullYear()} {SITE_NAME}</span>
          <span class="muted">The-Circle Music</span>
        </div>
      </footer>
    </div>

    <style is:global>
      html, body { height: 100%; }

      body{
        margin:0;
        min-height:100vh;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
        color:rgba(255,255,255,0.92);
        background-image:
          radial-gradient(900px 500px at 15% 10%, rgba(9,255,3,0.14), transparent 60%),
          radial-gradient(800px 450px at 85% 15%, rgba(120,170,255,0.18), transparent 55%),
          radial-gradient(700px 450px at 55% 95%, rgba(255,170,120,0.10), transparent 55%),
          linear-gradient(#070a0f, #070a0f);
        background-repeat:no-repeat;
        background-size:100% 100%;
        background-attachment:fixed;
      }

      a{color:inherit;text-decoration:none}
      .container{max-width:1020px;margin:0 auto;padding:0 18px}
      .page{min-height:100vh;display:flex;flex-direction:column}
      main{flex:1}

      .top{
        position:sticky;
        top:0;
        z-index:10;
        backdrop-filter:blur(10px);
        background:rgba(7,10,15,0.55);
        border-bottom:1px solid rgba(255,255,255,0.10);
      }
      .nav{
        display:flex;
        align-items:center;
        justify-content:space-between;
        padding:14px 18px;
        gap:14px;
      }
      .brand{
        display:flex;
        gap:10px;
        align-items:center;
        font-weight:900;
        letter-spacing:-0.02em;
        white-space:nowrap;
      }
      .logo{width:30px;height:30px;display:block}
      .links{display:flex;gap:14px;align-items:center}
      .links a{color:rgba(255,255,255,0.78);font-size:14px}
      .links a:hover{color:rgba(255,255,255,0.95)}

      .hero{padding:34px 0 12px}
      .heroCard{
        border:1px solid rgba(255,255,255,0.12);
        background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
        border-radius:22px;
        padding:22px;
        box-shadow:0 24px 70px rgba(0,0,0,0.45);
      }
      .heroTop{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
        flex-wrap:wrap;
        margin-bottom:10px;
      }
      .kicker{
        display:inline-flex;
        align-items:center;
        padding:6px 10px;
        border-radius:999px;
        border:1px solid rgba(9,255,3,0.18);
        background:rgba(9,255,3,0.08);
        color:rgba(255,255,255,0.82);
        font-size:12px;
      }
      .mini{color:rgba(255,255,255,0.70);font-size:14px}

      h1{
        margin:0 0 10px;
        font-size:42px;
        letter-spacing:-0.03em;
        line-height:1.08;
      }
      .lead{
        margin:0;
        color:rgba(255,255,255,0.74);
        font-size:17px;
        line-height:1.7;
        max-width:92ch;
      }

      .card{
        margin:18px 0 28px;
        border:1px solid rgba(255,255,255,0.12);
        background:rgba(255,255,255,0.06);
        border-radius:20px;
        padding:20px;
        box-shadow:0 20px 60px rgba(0,0,0,0.45);
      }
      .cardTop{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        flex-wrap:wrap;
        margin-bottom:12px;
      }

      .grid{
        display:grid;
        grid-template-columns:repeat(2,minmax(0,1fr));
        gap:12px;
      }
      .videosGrid{
        grid-template-columns:repeat(3,minmax(0,1fr));
        gap:14px;
      }

      .tile{
        border:1px solid rgba(255,255,255,0.12);
        border-radius:18px;
        padding:16px;
        background:rgba(255,255,255,0.03);
        transition:transform .12s ease, box-shadow .12s ease;
      }
      .tile:hover{
        transform:translateY(-2px);
        box-shadow:0 18px 40px rgba(0,0,0,0.35);
      }

      .tileTop{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        flex-wrap:wrap;
        margin-bottom:10px;
      }

      h2{margin:0;font-size:22px}
      h3{margin:0;font-size:16px}

      .chip{
        padding:6px 10px;
        border-radius:999px;
        border:1px solid rgba(9,255,3,0.20);
        background:rgba(9,255,3,0.08);
        color:rgba(255,255,255,0.82);
        font-size:12px;
      }
      .chip.soft{
        border-color:rgba(255,255,255,0.16);
        background:rgba(255,255,255,0.04);
        color:rgba(255,255,255,0.70);
      }
      .tag.soft{
        padding:6px 10px;
        border-radius:999px;
        border:1px solid rgba(255,255,255,0.16);
        background:rgba(255,255,255,0.04);
        color:rgba(255,255,255,0.70);
        font-size:12px;
      }

      .videoTile.featuredVideo{
        border:2px solid rgba(9,255,3,0.40);
        box-shadow:
          0 0 0 1px rgba(9,255,3,0.20) inset,
          0 18px 40px rgba(9,255,3,0.10);
        transform:translateY(-1px) scale(1.03);
      }
      .videoTile.featuredVideo:hover{
        transform:translateY(-2px) scale(1.035);
      }

      .player{
        border-radius:16px;
        overflow:hidden;
        border:1px solid rgba(255,255,255,0.10);
        background:#000;
      }
      .player iframe{
        width:100%;
        aspect-ratio:16/9;
        display:block;
        border:0;
      }

      .btn{
        display:inline-flex;
        align-items:center;
        justify-content:center;
        padding:10px 14px;
        border-radius:14px;
        border:1px solid rgba(255,255,255,0.14);
        background:rgba(255,255,255,0.04);
        box-shadow:0 8px 25px rgba(0,0,0,0.22);
        font-weight:600;
      }
      .btn.ghost{background:rgba(255,255,255,0.03)}

      .accordions{display:flex;flex-direction:column;gap:10px}
      details.acc{
        border:1px solid rgba(255,255,255,0.12);
        background:rgba(255,255,255,0.03);
        border-radius:16px;
        overflow:hidden;
      }
      summary.accSum{
        list-style:none;
        cursor:pointer;
        padding:14px 14px;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
        user-select:none;
      }
      summary.accSum::-webkit-details-marker{display:none}
      .sumLeft{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
      .sumRight{display:flex;align-items:center;gap:10px}
      .sumTitle{font-weight:900;letter-spacing:-0.01em}
      .chev{opacity:0.75;font-size:14px;transition:transform .18s ease}
      details[open] > summary .chev{transform:rotate(180deg)}
      .accBody{padding:12px 14px 14px}

      details.nestedAcc{margin-top:10px}
      details.nestedAcc, details.albumAcc{
        border:1px solid rgba(255,255,255,0.10);
        background:rgba(0,0,0,0.12);
        border-radius:14px;
        overflow:hidden;
      }
      details.albumAcc{margin-top:10px}
      details.nestedAcc > summary, details.albumAcc > summary{padding:12px 12px}

      .tracksBody{padding-top:10px}
      .trackGrid{
        display:grid;
        grid-template-columns:repeat(2,minmax(0,1fr));
        gap:12px;
      }
      .trackItem{
        border:1px solid rgba(255,255,255,0.10);
        border-radius:16px;
        padding:12px;
        background:rgba(0,0,0,0.18);
      }
      .trackMeta{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        margin-bottom:10px;
      }
      .trackName{font-weight:800;color:rgba(255,255,255,0.90)}
      .trackLink{
        color:rgba(255,255,255,0.70);
        font-size:13px;
        border-bottom:1px solid rgba(255,255,255,0.18);
      }
      .trackLink:hover{color:rgba(255,255,255,0.92)}
      .scFrame{
        width:100%;
        height:166px;
        border:0;
        border-radius:14px;
        overflow:hidden;
        display:block;
      }

      .footer{
        border-top:1px solid rgba(255,255,255,0.10);
        background:rgba(7,10,15,0.35);
        backdrop-filter:blur(10px);
      }
      .foot{
        display:flex;
        justify-content:space-between;
        gap:12px;
        padding:16px 18px;
        flex-wrap:wrap;
      }
      .muted{color:rgba(255,255,255,0.55)}

      @media (max-width: 900px){
        .videosGrid{grid-template-columns:1fr;}
        .videoTile.featuredVideo{transform:none}
        .trackGrid{grid-template-columns:1fr}
      }
      @media (max-width: 820px){
        .links{display:none}
        h1{font-size:34px}
      }
    </style>
  </body>
</html>
