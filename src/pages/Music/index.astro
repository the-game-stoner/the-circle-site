---
const SITE_NAME = "The-Circle";

/* Videos (Mall Days centered) */
const videoTracks = [
  { title: "Video", youtubeId: "9CdIK8tILPo" },
  { title: "Mall Days", youtubeId: "GZ-o7LNu1Vg", featured: true },
  { title: "Video", youtubeId: "HFPc52w-VqI" },
];

/* SoundCloud embed builder */
const scEmbedSrc = (trackUrl) => {
  const p = new URLSearchParams({
    url: trackUrl,
    color: "#09ff03",
    auto_play: "false",
    hide_related: "true",
    show_comments: "false",
    show_user: "false",
    show_reposts: "false",
    show_teaser: "false",
    visual: "false",
  });
  return `https://w.soundcloud.com/player/?${p.toString()}`;
};

const audioByGenre = [
  {
    genre: "Country",
    albums: [
      {
        title: "Whiskey & Rust",
        artist: "TGS",
        tracks: [
          { title: "Barstool Sessions", url: "https://soundcloud.com/thegamestoner/barstool-sessions-1" },
          { title: "Bowtie Blues", url: "https://soundcloud.com/thegamestoner/bowtie-blues-2" },
          { title: "High on Summer", url: "https://soundcloud.com/thegamestoner/high-on-summer-3" },
          { title: "Whiskey & Ashes", url: "https://soundcloud.com/thegamestoner/whiskey-ashes-4" },
          { title: "A Good Man After All", url: "https://soundcloud.com/thegamestoner/a-good-man-after-all-5" },
        ],
      },
    ],
  },
  {
    genre: "Hip-Hop / Rap",
    albums: [
      {
        title: "Dayo (EP)",
        artist: "TGS / Dayo",
        new: true,
        tracks: [
          { title: "Dayo", url: "https://soundcloud.com/thegamestoner/dayo-6?in=thegamestoner/sets/dayo-mayonnaise" },
          { title: "After Hours", url: "https://soundcloud.com/thegamestoner/after-hours-5?in=thegamestoner/sets/dayo-mayonnaise" },
          { title: "No Apologies", url: "https://soundcloud.com/thegamestoner/no-apologies-1?in=thegamestoner/sets/dayo-mayonnaise" },
          { title: "Pressure", url: "https://soundcloud.com/thegamestoner/pressure-3?in=thegamestoner/sets/dayo-mayonnaise" },
          { title: "Say Less", url: "https://soundcloud.com/thegamestoner/say-less-2?in=thegamestoner/sets/dayo-mayonnaise" },
          { title: "Still Up", url: "https://soundcloud.com/thegamestoner/still-up-4?in=thegamestoner/sets/dayo-mayonnaise" },
        ],
      },
      {
        title: "Smoke & Mirrors",
        artist: "TGS",
        tracks: [
          { title: "Buffalo Born", url: "https://soundcloud.com/thegamestoner/the-7-1-6-1" },
          { title: "Cruisin’ down Elmwood", url: "https://soundcloud.com/thegamestoner/cruisin-down-elmwood-2" },
          { title: "Day Off", url: "https://soundcloud.com/thegamestoner/day-off-3" },
          { title: "My Routine", url: "https://soundcloud.com/thegamestoner/routine-4" },
          { title: "Mall Days", url: "https://soundcloud.com/thegamestoner/mall-rats-5" },
          { title: "BRB", url: "https://soundcloud.com/thegamestoner/brb-6" },
          { title: "Get Real", url: "https://soundcloud.com/thegamestoner/get-real-7" },
        ],
      },
    ],
  },
];
---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Music • {SITE_NAME}</title>
    <link rel="icon" href="/favicon.png" type="image/svg+xml" />
    <meta name="description" content="The-Circle Music — videos and albums." />
  </head>

  <body>
    <div class="page">
      <header class="top">
        <div class="container nav">
          <a class="brand" href="/">
            <img src="/favicon.png" alt="" class="logo"/>
            <span>{SITE_NAME}</span>
          </a>

          <nav class="links">
            <a href="/discord">Discord</a>
            <a href="/league">League</a>
            <a href="/music">Music</a>
            <a href="/about">About</a>
            <a href="/blog">Blog</a>
          </nav>
        </div>
      </header>

      <main class="container">
        <section class="hero">
          <div class="heroCard">
            <div class="heroTop">
              <span class="kicker">The-Circle Music</span>
              <span class="mini">Videos & Albums</span>
            </div>

            <h1>Music</h1>

            <p class="lead">
              Videos up top. Audio below — tap a genre, then an album to reveal the tracks.
            </p>
          </div>
        </section>

        <!-- VIDEOS -->
        <section class="card" aria-label="Music videos">
          <div class="cardTop">
            <h2>Videos</h2>
            <span class="tag soft">{videoTracks.length} video(s)</span>
          </div>

          <div class="grid videosGrid">
            {videoTracks.map((v) => (
              <article class={`tile videoTile ${v.featured ? "featuredVideo" : ""}`}>
                <div class="tileTop">
                  <h3>{v.title}</h3>
                  <span class="chip">Video</span>
                </div>

                <div class="player">
                  <iframe
                    src={`https://www.youtube-nocookie.com/embed/${v.youtubeId}`}
                    title={v.title}
                    loading="lazy"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen
                  ></iframe>
                </div>
              </article>
            ))}
          </div>
        </section>

        <!-- AUDIO (Dropdowns) -->
        <section class="card" aria-label="Audio library">
          <div class="cardTop">
            <h2>Audio</h2>
            <span class="tag soft">Tap to expand</span>
          </div>

          <div class="accordions">
            {audioByGenre.map((g) => (
              <details class="acc genreAcc">
                <summary class="accSum">
                  <div class="sumLeft">
                    <span class="sumTitle">{g.genre}</span>
                    <span class="chip soft">{g.albums.length} album(s)</span>
                  </div>
                  <span class="chev" aria-hidden="true">▾</span>
                </summary>

                <div class="accBody">
                  {g.albums.map((a) => (
                    <details class="acc albumAcc">
                      <summary class="accSum">
                        <div class="sumLeft">
                          <span class="sumTitle">{a.title} — {a.artist}</span>
                          <span class="chip soft">{a.tracks.length} track(s)</span>
                        </div>

                        <div class="sumRight">
                          {a.new && <span class="chip">NEW</span>}
                          <span class="chev" aria-hidden="true">▾</span>
                        </div>
                      </summary>

                      <div class="accBody tracksBody">
                        <div class="trackGrid">
                          {a.tracks.map((t) => (
                            <div class="trackItem">
                              <div class="trackMeta">
                                <span class="trackName">{t.title}</span>
                                <a class="trackLink" href={t.url} target="_blank" rel="noreferrer">Link</a>
                              </div>

                              <iframe
                                class="scFrame"
                                title={`${a.title} — ${t.title}`}
                                scrolling="no"
                                frameborder="no"
                                allow="autoplay"
                                loading="lazy"
                                src={scEmbedSrc(t.url)}
                              ></iframe>
                            </div>
                          ))}
                        </div>
                      </div>
                    </details>
                  ))}
                </div>
              </details>
            ))}
          </div>
        </section>
      </main>

      <footer class="footer">
        <div class="container foot">
          <span>© {new Date().getFullYear()} {SITE_NAME}</span>
          <span class="muted">The-Circle Music</span>
        </div>
      </footer>
    </div>

    <!-- (Your existing CSS below — unchanged) -->
  </body>
</html>
