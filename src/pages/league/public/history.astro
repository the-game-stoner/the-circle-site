---
const SITE_NAME = "The-Circle";

/**
 * Public league has not played a season yet.
 * Keep this empty until the first season finishes, then add seasons.
 */
const SEASONS = [];

const fmt = (n) => n.toFixed(2);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>History • Public League • {SITE_NAME}</title>
    <meta name="description" content="Season history for The-Circle public fantasy league." />
  </head>

  <body>
    <div class="page">
      <header class="top">
        <div class="container nav">
          <a class="brand" href="/"><span class="mark" aria-hidden="true"></span><span>{SITE_NAME}</span></a>
          <nav class="links">
            <a href="/">Home</a>
            <a href="/league">League</a>
            <a href="/about">About</a>
          </nav>
        </div>
      </header>

      <main class="container">
        <section class="card">
          <div class="head">
            <h1>Public League History</h1>
            <a class="mini" href="/league/public">← Back to Public Hub</a>
          </div>

          <p class="lead">
            The public league is new — no completed seasons yet. Once the first season wraps, standings will show up here.
          </p>

          <div class="cta">
            <a class="btn primary" href="/league/public/apply">Apply to join</a>
            <a class="btn ghost" href="/league/public/teams">Teams</a>
          </div>

          <div class="empty">
            <div class="emptyTop">
              <span class="pill">No seasons yet</span>
              <span class="subtle">First season will appear here after it finishes</span>
            </div>

            <div class="emptyGrid">
              <div class="ghostCard">
                <h2>Season standings</h2>
                <p>Rank, W-L-T, points for/against, streak, waiver, moves.</p>
              </div>

              <div class="ghostCard">
                <h2>Highlights</h2>
                <p>Champion, runner-up, last place, playoff teams.</p>
              </div>

              <div class="ghostCard">
                <h2>Stats (later)</h2>
                <p>Most points, best record, playoff appearances, rivalries.</p>
              </div>
            </div>

          </div>
        </section>

        {SEASONS.length > 0 && (
          <>
            <section class="card">
              <p class="lead">Past standings by season. Top 4 teams are highlighted.</p>

              <div class="legend">
                <span class="key"><span class="dot playoff"></span> Playoffs (Top 4)</span>
                <span class="key"><span class="dot champ"></span> Champion (Rank 1)</span>
              </div>
            </section>

            {SEASONS.map((season) => (
              <section class="card season">
                <div class="seasonHead">
                  <h2>{season.year}</h2>
                  <span class="subtle">{season.rows.length} teams</span>
                </div>

                <div class="tableWrap">
                  <table>
                    <thead>
                      <tr>
                        <th class="colPlace">Rank</th>
                        <th>Team</th>
                        <th class="num">W-L-T</th>
                        <th class="num">PF</th>
                        <th class="num">PA</th>
                        <th class="num">Streak</th>
                        <th class="num">Waiver</th>
                        <th class="num">Moves</th>
                      </tr>
                    </thead>

                    <tbody>
                      {season.rows.map((r) => (
                        <tr class={r.playoff ? "playoffRow" : ""}>
                          <td class="place">{r.rank}</td>
                          <td>
                            <span class={"teamBadge " + (r.rank === 1 ? "champ" : r.playoff ? "playoff" : "")}>
                              {r.team}
                            </span>
                          </td>
                          <td class="num">{r.record}</td>
                          <td class="num">{fmt(r.pf)}</td>
                          <td class="num">{fmt(r.pa)}</td>
                          <td class="num">
                            <span class={"streak " + (r.streak.startsWith("W") ? "win" : "lose")}>{r.streak}</span>
                          </td>
                          <td class="num">{r.waiver}</td>
                          <td class="num">{r.moves}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </section>
            ))}
          </>
        )}
      </main>

      <footer class="footer">
        <div class="container foot">
          <span>© {new Date().getFullYear()} {SITE_NAME}</span>
          <span class="muted">Public League history</span>
        </div>
      </footer>
    </div>

    <style is:global>
      html, body { height: 100%; }
      body{
        margin:0; min-height:100vh;
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
        color:rgba(255,255,255,0.92);
        background-image:
          radial-gradient(900px 500px at 15% 10%, rgba(9,255,3,0.14), transparent 60%),
          radial-gradient(800px 450px at 85% 15%, rgba(120,170,255,0.18), transparent 55%),
          radial-gradient(700px 450px at 55% 95%, rgba(255,170,120,0.10), transparent 55%),
          linear-gradient(#070a0f, #070a0f);
        background-repeat:no-repeat;
        background-size:100% 100%;
        background-attachment:fixed;
      }

      .page{min-height:100vh;display:flex;flex-direction:column}
      main{flex:1}
      a{color:inherit;text-decoration:none}
      .container{max-width:1020px;margin:0 auto;padding:0 18px}

      .top{position:sticky;top:0;z-index:10;backdrop-filter:blur(10px);background:rgba(7,10,15,0.55);border-bottom:1px solid rgba(255,255,255,0.10)}
      .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;gap:14px}
      .brand{display:flex;gap:10px;align-items:center;font-weight:900;letter-spacing:-0.02em;white-space:nowrap}
      .mark{width:12px;height:12px;border-radius:999px;background:#09ff03;box-shadow:0 0 0 6px rgba(9,255,3,0.12), 0 0 28px rgba(9,255,3,0.25)}
      .links{display:flex;gap:14px;align-items:center}
      .links a{color:rgba(255,255,255,0.78);font-size:14px}
      .links a:hover{color:rgba(255,255,255,0.95)}

      .card{
        margin:18px 0;
        border:1px solid rgba(255,255,255,0.12);
        background:rgba(255,255,255,0.06);
        border-radius:18px;
        padding:20px;
        box-shadow:0 20px 60px rgba(0,0,0,0.45)
      }

      .head{display:flex;align-items:baseline;justify-content:space-between;gap:12px;flex-wrap:wrap}
      .mini{color:rgba(255,255,255,0.70);font-size:14px}
      .mini:hover{color:rgba(255,255,255,0.95)}

      h1{margin:0;font-size:34px;letter-spacing:-0.02em}
      h2{margin:0;font-size:18px;letter-spacing:-0.02em}

      .lead{color:rgba(255,255,255,0.72);font-size:17px;line-height:1.6;max-width:86ch;margin:10px 0 0}

      .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
      .btn{
        display:inline-flex;align-items:center;justify-content:center;
        padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,0.14);
        background:rgba(255,255,255,0.04);
        box-shadow:0 8px 25px rgba(0,0,0,0.22);
        transition:transform .12s ease, background .12s ease, box-shadow .12s ease;
        font-weight:600;
      }
      .btn:hover{transform:translateY(-1px);background:rgba(255,255,255,0.07)}
      .btn.primary{
        border-color:rgba(9,255,3,0.45);
        background:linear-gradient(180deg, rgba(9,255,3,0.22), rgba(9,255,3,0.12));
        box-shadow:
          0 0 0 1px rgba(9,255,3,0.25) inset,
          0 12px 30px rgba(9,255,3,0.18);
      }
      .btn.primary:hover{
        background:linear-gradient(180deg, rgba(9,255,3,0.32), rgba(9,255,3,0.18));
        box-shadow:
          0 0 0 1px rgba(9,255,3,0.45) inset,
          0 18px 40px rgba(9,255,3,0.28);
      }
      .btn.ghost{background:rgba(255,255,255,0.03)}

      /* Empty state */
      .empty{
        margin-top:16px;
        border:1px dashed rgba(255,255,255,0.18);
        border-radius:16px;
        padding:16px;
        background:rgba(255,255,255,0.03);
      }
      .emptyTop{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
      .pill{
        display:inline-flex;align-items:center;
        padding:6px 10px;border-radius:999px;
        border:1px solid rgba(255,255,255,0.16);
        background:rgba(255,255,255,0.04);
        color:rgba(255,255,255,0.80);
        font-size:12px;
      }
      .subtle{color:rgba(255,255,255,0.55);font-size:13px}

      .emptyGrid{
        display:grid;
        grid-template-columns:repeat(3,minmax(0,1fr));
        gap:12px;
        margin-top:12px;
      }
      .ghostCard{
        border:1px solid rgba(255,255,255,0.12);
        border-radius:16px;
        padding:14px;
        background:rgba(255,255,255,0.03);
      }
      .ghostCard p{margin:8px 0 0;color:rgba(255,255,255,0.70);line-height:1.6}
      .fine{margin-top:14px;color:rgba(255,255,255,0.55);font-size:13px}
      code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px}

      /* Table styles (only used if SEASONS has data) */
      .legend{display:flex;gap:14px;flex-wrap:wrap;margin-top:12px}
      .key{display:flex;gap:8px;align-items:center;color:rgba(255,255,255,0.70);font-size:13px}
      .dot{width:10px;height:10px;border-radius:999px;border:1px solid rgba(255,255,255,0.18);background:rgba(255,255,255,0.04)}
      .dot.playoff{border-color:rgba(9,255,3,0.20);background:rgba(9,255,3,0.08)}
      .dot.champ{border-color:rgba(255,215,120,0.28);background:rgba(255,215,120,0.10)}

      .season{padding-top:18px}
      .seasonHead{display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin-bottom:10px}

      .tableWrap{overflow:auto;border:1px solid rgba(255,255,255,0.12);border-radius:16px;background:rgba(255,255,255,0.03)}
      table{width:100%;border-collapse:collapse;min-width:980px}
      th, td{padding:12px 14px;border-bottom:1px solid rgba(255,255,255,0.10);text-align:left}
      th{color:rgba(255,255,255,0.75);font-size:13px;letter-spacing:.02em}
      td{color:rgba(255,255,255,0.88)}
      tr:last-child td{border-bottom:none}
      .colPlace{width:62px}
      .place{font-weight:900}
      .num{text-align:right;font-variant-numeric:tabular-nums}

      .teamBadge{
        display:inline-flex;align-items:center;
        padding:6px 10px;border-radius:999px;
        border:1px solid rgba(255,255,255,0.14);
        background:rgba(255,255,255,0.03);
        font-size:13px;
      }
      .teamBadge.playoff{border-color:rgba(9,255,3,0.22);background:rgba(9,255,3,0.08)}
      .teamBadge.champ{border-color:rgba(255,215,120,0.30);background:rgba(255,215,120,0.12)}
      .playoffRow td{background:rgba(9,255,3,0.03)}

      .streak{
        display:inline-flex;align-items:center;justify-content:center;
        padding:6px 10px;border-radius:999px;
        border:1px solid rgba(255,255,255,0.14);
        background:rgba(255,255,255,0.03);
        font-size:13px;
        min-width:56px;
      }
      .streak.win{border-color:rgba(9,255,3,0.22);background:rgba(9,255,3,0.08)}
      .streak.lose{border-color:rgba(255,120,120,0.26);background:rgba(255,120,120,0.08)}

      /* Footer */
      .footer{
        border-top: 1px solid rgba(255,255,255,0.10);
        background: rgba(7,10,15,0.35);
        backdrop-filter: blur(10px);
      }
      .foot{
        display:flex;justify-content:space-between;gap:12px;
        padding:16px 18px;flex-wrap:wrap;
      }
      .muted{color:rgba(255,255,255,0.55)}

      @media (max-width: 820px){
        .links{display:none}
        .emptyGrid{grid-template-columns:1fr}
      }
    </style>
  </body>
</html>
